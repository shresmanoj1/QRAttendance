import 'dart:convert';import 'dart:io';import 'package:http/http.dart' as http;import 'package:qr_attendance/components/constants.dart';import 'package:shared_preferences/shared_preferences.dart';import '../request/date_request.dart';import '../response/student_daily_attendance_response.dart';class StudentAttendanceReportService {  Future<StudentDailyAttendanceResponse> studentDailyAttendanceReport(DateRequest request) async {    final SharedPreferences sharedPreferences = await SharedPreferences.getInstance();    String? token = sharedPreferences.getString('token');    final date = DateTime.now();    String formattedDate = date.toString().substring(0,10);    try {      return await http          .get(Uri.parse(api_url2+'attendance/daily-student-attendance?course=${request.course??''}&attendanceDate=$formattedDate&batch=${request.batch??''}&module='),          headers: {            'Authorization': 'Bearer $token',            'Content-Type': 'application/json',            'accept': 'application/json',          },)          .then((data) {        if (data.statusCode == 200) {          final response =          StudentDailyAttendanceResponse.fromJson(jsonDecode(data.body));          return response;        } else if (data.statusCode == 404 || data.statusCode == 401) {          return StudentDailyAttendanceResponse(              success: false,              dailyStdAttendance: null,);        } else {          return StudentDailyAttendanceResponse(              success: false,              dailyStdAttendance: null,              );        }      }).catchError((e) {        return StudentDailyAttendanceResponse(            success: false,            dailyStdAttendance: null,            );      });    } on SocketException catch (e) {      // ignore: avoid_print      return StudentDailyAttendanceResponse(          success: false,          dailyStdAttendance: null,          );    } on HttpException {      return StudentDailyAttendanceResponse(          success: false,          dailyStdAttendance: null,          );    } on FormatException {      return StudentDailyAttendanceResponse(          success: false,          dailyStdAttendance: null,          );    }  }}